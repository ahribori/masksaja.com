(this["webpackJsonpreact-kakaomap-templates"]=this["webpackJsonpreact-kakaomap-templates"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(22),r=n.n(c),i=(n(81),n(141)),l=n(69),s=n(42),u=n(132),m=Object(l.a)({palette:{primary:s.a,secondary:u.a},typography:{fontFamily:["Noto Sans KR","-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue"].join(",")}}),p=n(60),d=n.n(p),f=n(19),g=n(33),h=n(133),b=n(28),v=n(134),E=n(135),O=n(136),j=n(142),k=n(11),w=n(63),y=n.n(w),S=Object(h.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(b.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(b.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(k.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(k.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(b.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}})),C=function(e){var t=e.onSearch,n=S(),c=Object(a.useState)(""),r=Object(f.a)(c,2),i=r[0],l=r[1];return o.a.createElement("div",{className:n.root},o.a.createElement(v.a,{position:"fixed"},o.a.createElement(E.a,null,o.a.createElement(O.a,{className:n.title,variant:"h6",noWrap:!0},"\ub9c8\uc2a4\ud06c\uc0ac\uc790"),o.a.createElement("div",{className:n.search},o.a.createElement("div",{className:n.searchIcon},o.a.createElement(y.a,null)),o.a.createElement(j.a,{placeholder:"\uac74\ubb3c, \uc9c0\uc5ed \uac80\uc0c9...",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return l(e.target.value)},value:i,onKeyPress:function(e){13===e.charCode&&(t(i),e.target.blur())}})))))};C.defaultProps={onSearch:function(){}};var N=C,L=n(109),x=n(137),B=n(138),I=n(139),R=Object(h.a)((function(e){return{toolbar:Object(b.a)({position:"fixed",zIndex:99999,right:e.spacing(1),top:e.spacing(8),backgroundColor:"#fff"},e.breakpoints.up("sm"),{top:e.spacing(10),right:e.spacing(2)})}})),T=function(e){var t=e.pending,n=e.onLocationButtonClick,a=e.onRenewButtonClick,c=R();return o.a.createElement("div",{className:c.toolbar},o.a.createElement(x.a,{orientation:"vertical",variant:"outlined",color:"primary","aria-label":"outlined primary button group"},o.a.createElement(L.a,{disabled:t,onClick:function(){return n()}},o.a.createElement(B.a,null)),o.a.createElement(L.a,{disabled:t,onClick:function(){return a()}},o.a.createElement(I.a,null))))};T.defaultProps={onLocationButtonClick:function(){},onRenewButtonClick:function(){}};var _,z=T,A=n(143),M=n(38),P=n(64),F=n(31),W=n.n(F),G=W.a.CancelToken,H=function(){function e(){Object(M.a)(this,e)}return Object(P.a)(e,[{key:"fetchShopsByBounds",value:function(e,t,n){return _&&_(),W.a.get("https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat=".concat(e,"&lng=").concat(t,"&m=").concat(n),{cancelToken:new G((function(e){_=e}))})}}]),e}(),K=new function e(){Object(M.a)(this,e),this.Shop=new H},U=Object(h.a)((function(e){return{info:{position:"fixed",zIndex:9999,backgroundColor:"rgba(0,0,0,0.6)",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",top:"50%",left:"50%",width:240,height:80,marginTop:-40,marginLeft:-120,fontSize:15}}})),J=function(e){var t=e.message,n=U();return o.a.createElement("div",{className:n.info},t)},Z=n(140),q=n(43),D=Object(h.a)((function(e){return{normal:{padding:e.spacing(1),backgroundColor:s.a[700],color:"#fff",textAlign:"center",minWidth:40},soldOut:{padding:e.spacing(1),backgroundColor:q.a[500],color:"#fff"},title:{fontSize:13,fontWeight:700},content:{fontSize:11}}})),$=function(e){var t=e.code,n=e.name,a=(e.type,e.addr),c=e.tel,r=(e.stock_d,e.stock_t,e.stock_cnt,e.sold_cnt,e.remain_cnt),i=e.sold_out,l=(e.lat,e.lng,D());return o.a.createElement("div",{"data-shop-code":t,className:l.container,"data-tippy-content":Object(g.renderToStaticMarkup)(o.a.createElement((function(){return o.a.createElement("div",null,o.a.createElement(O.a,{className:l.title},n),o.a.createElement(O.a,{className:l.content,component:"p"},"\ub0a8\uc740 \uc218\ub7c9: ",r),o.a.createElement(O.a,{className:l.content,component:"p"},c),o.a.createElement(O.a,{className:l.content,component:"p"},a))}),null))},!i&&o.a.createElement(Z.a,{className:l.normal},o.a.createElement(O.a,{className:l.title},r,"\uac1c")),i&&o.a.createElement(Z.a,{className:l.soldOut},o.a.createElement(O.a,{className:l.title},"\ud488\uc808")))},Q=n(68),V=(n(105),Object(h.a)((function(e){return{map:{width:"100%",height:"100%"},progress:{position:"fixed",zIndex:9999,width:"100%"}}})));var X=function(){var e=Object(a.useState)(!0),t=Object(f.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(window.kakao),i=Object(f.a)(r,1)[0],l=Object(a.useState)(null),s=Object(f.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)(null),d=Object(f.a)(p,2),h=d[0],b=d[1],v=Object(a.useState)(""),E=Object(f.a)(v,2),O=E[0],j=E[1],k=V(),w=function(e,t){var n=Object(a.useState)(e),o=Object(f.a)(n,2),c=o[0],r=o[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){r(e)}),t);return function(){clearTimeout(n)}}),[e,t]),c}(h,300),y=Object(a.useCallback)((function(){return u.getBounds()}),[u]),S=function(){navigator.geolocation?(c(!0),navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,a=t.longitude,o=new i.maps.LatLng(n,a);u.panTo(o),b(y()),c(!1)}),(function(){c(!1),alert("\uc704\uce58\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}))):(alert("\uc704\uce58\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),c(!1))},C=function(){document.querySelectorAll("[data-shop-code]").forEach((function(e){return e.parentNode.removeChild(e)}))};return Object(a.useEffect)((function(){var e=document.getElementById("map"),t={center:new i.maps.LatLng(37.4019528117587,127.10828323199647),level:5},n=new i.maps.Map(e,t);m(n),c(!1)}),[i.maps]),Object(a.useEffect)((function(){u&&(S(),i.maps.event.addListener(u,"tilesloaded",(function(){u.getLevel()<=6?(b(y()),j("")):(C(),_&&(_(),c(!1)),j("\uc9c0\ub3c4\ub97c \uc880 \ub354 \ud655\ub300\ud574\uc8fc\uc138\uc694"))})))}),[u]),Object(a.useEffect)((function(){if(h){var e=u.getCenter(),t=e.Ha,n=e.Ga,a=200*(u.getLevel()+1);c(!0),K.Shop.fetchShopsByBounds(t,n,a).then((function(e){var t=e.data.stores;console.log(e.data),function(e){setTimeout((function(){C(),e.forEach((function(e){var t=e.lat,n=e.lng;new i.maps.CustomOverlay({map:u,clickable:!0,position:new i.maps.LatLng(t,n),content:Object(g.renderToStaticMarkup)(o.a.createElement($,e)),zIndex:99999}).setMap(u),Object(Q.a)("[data-tippy-content]",{allowHTML:!0})}))}),0)}(t),c(!1)})).catch((function(e){W.a.isCancel(e)||c(!1)}))}}),[w]),o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{onSearch:function(e){var t;e&&(t=e,c(!0),(new i.maps.services.Places).keywordSearch(t,(function(e,t){if(t===i.maps.services.Status.OK){var n=e[0],a=n.x,o=n.y,r=new i.maps.LatLng(o,a);u.panTo(r),u.setLevel(3)}else t===i.maps.services.Status.ZERO_RESULT?alert("\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."):alert("\uc11c\ube44\uc2a4\uc5d0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");c(!1)})))}}),o.a.createElement(z,{pending:n,onLocationButtonClick:S,onRenewButtonClick:function(){u.getLevel()<=6&&b(y())}}),n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(A.a,{color:"secondary",className:k.progress}),o.a.createElement("div",{className:k.dimmer})),O&&o.a.createElement(J,{message:O}),o.a.createElement("div",{id:"map",className:k.map}))},Y=Object(h.a)((function(e){return{root:{position:"fixed",zIndex:9999,right:0,bottom:0,width:200,fontSize:11,padding:e.spacing(1),textAlign:"right"}}})),ee=function(){var e=Y();return o.a.createElement("div",{className:e.root},o.a.createElement("div",null,"\uac1c\ubc1c: \uc815\ud604\uc2b9"),o.a.createElement("div",null,"\ubb38\uc758: ahribori@gmail.com"))};var te=function(){return o.a.createElement(i.a,{theme:m},o.a.createElement("div",{className:d.a.App},o.a.createElement(X,null),o.a.createElement(ee,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){e.exports={App:"App_App__3jZN5"}},76:function(e,t,n){e.exports=n(106)},81:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.afaf548b.chunk.js.map