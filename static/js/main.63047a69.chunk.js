(this["webpackJsonpreact-kakaomap-templates"]=this["webpackJsonpreact-kakaomap-templates"]||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(14),r=a.n(c),i=(a(91),a(162)),l=a(79),s=a(49),u=a(149),m=Object(l.a)({palette:{primary:s.a,secondary:u.a},typography:{fontFamily:["Noto Sans KR"].join(",")}}),p=a(70),d=a.n(p),f=a(20),g=a(40),b=a(150),h=a(33),v=a(151),E=a(153),j=a(117),O=a(164),k=a(12),w=a(73),y=a.n(w),S=Object(b.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(h.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(h.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(k.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(k.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(h.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}})),C=function(e){var t=e.onSearch,a=S(),c=Object(n.useState)(""),r=Object(f.a)(c,2),i=r[0],l=r[1];return o.a.createElement("div",{className:a.root},o.a.createElement(v.a,{position:"fixed"},o.a.createElement(E.a,null,o.a.createElement(j.a,{className:a.title,variant:"h6",noWrap:!0},"\ub9c8\uc2a4\ud06c\uc0ac\uc790"),o.a.createElement("div",{className:a.search},o.a.createElement("div",{className:a.searchIcon},o.a.createElement(y.a,null)),o.a.createElement(O.a,{placeholder:"\uac74\ubb3c, \uc9c0\uc5ed \uac80\uc0c9...",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return l(e.target.value)},value:i,onKeyPress:function(e){13===e.charCode&&(t(i),e.target.blur())}})))))};C.defaultProps={onSearch:function(){}};var N=C,L=a(119),x=a(154),B=a(155),I=a(156),z=Object(b.a)((function(e){return{toolbar:Object(h.a)({position:"fixed",zIndex:99999,right:e.spacing(1),top:e.spacing(8),backgroundColor:"#fff"},e.breakpoints.up("sm"),{top:e.spacing(10),right:e.spacing(2)})}})),T=function(e){var t=e.pending,a=e.onLocationButtonClick,n=e.onRenewButtonClick,c=z();return o.a.createElement("div",{className:c.toolbar},o.a.createElement(x.a,{orientation:"vertical",variant:"outlined",color:"primary","aria-label":"outlined primary button group"},o.a.createElement(L.a,{disabled:t,onClick:function(){return a()}},o.a.createElement(B.a,null)),o.a.createElement(L.a,{disabled:t,onClick:function(){return n()}},o.a.createElement(I.a,null))))};T.defaultProps={onLocationButtonClick:function(){},onRenewButtonClick:function(){}};var R,_=T,A=a(158),P=a(45),M=a(74),W=a(37),G=a.n(W),F=G.a.CancelToken,K=function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,[{key:"fetchShopsByBounds",value:function(e,t,a){return R&&R(),G.a.get("https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat=".concat(e,"&lng=").concat(t,"&m=").concat(a),{cancelToken:new F((function(e){R=e}))})}}]),e}(),H=new function e(){Object(P.a)(this,e),this.Shop=new K},J=Object(b.a)((function(e){return{info:{position:"fixed",zIndex:9999,backgroundColor:"rgba(0,0,0,0.6)",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",top:"50%",left:"50%",width:240,height:80,marginTop:-40,marginLeft:-120,fontSize:15}}})),Z=function(e){var t=e.message,a=J();return o.a.createElement("div",{className:a.info},t)},q=a(157),U=a(50),$=Object(b.a)((function(e){return{normal:{padding:e.spacing(1),backgroundColor:s.a[700],color:"#fff",textAlign:"center",minWidth:40},soldOut:{padding:e.spacing(1),backgroundColor:U.a[500],color:"#fff"},title:{fontSize:13,fontWeight:700},content:{fontSize:11}}})),D=function(e){var t=e.code,a=e.name,n=(e.type,e.addr),c=e.tel,r=(e.stock_d,e.stock_t,e.stock_cnt,e.sold_cnt,e.remain_cnt),i=e.sold_out,l=(e.lat,e.lng,$());return o.a.createElement("div",{"data-shop-code":t,className:l.container,"data-tippy-content":Object(g.renderToStaticMarkup)(o.a.createElement((function(){return o.a.createElement("div",null,o.a.createElement(j.a,{className:l.title},a),o.a.createElement(j.a,{className:l.content,component:"p"},"\ub0a8\uc740 \uc218\ub7c9: ",r),o.a.createElement(j.a,{className:l.content,component:"p"},c),o.a.createElement(j.a,{className:l.content,component:"p"},n))}),null))},!i&&o.a.createElement(q.a,{className:l.normal},o.a.createElement(j.a,{className:l.title},r,"\uac1c")),i&&o.a.createElement(q.a,{className:l.soldOut},o.a.createElement(j.a,{className:l.title},"\ud488\uc808")))},Q=a(78),V=(a(115),Object(b.a)((function(e){return{map:{width:"100%",height:"100%"},progress:{position:"fixed",zIndex:9999,width:"100%"}}})));var X=function(){var e=Object(n.useState)(!0),t=Object(f.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(window.kakao),i=Object(f.a)(r,1)[0],l=Object(n.useState)(null),s=Object(f.a)(l,2),u=s[0],m=s[1],p=Object(n.useState)(null),d=Object(f.a)(p,2),b=d[0],h=d[1],v=Object(n.useState)(""),E=Object(f.a)(v,2),j=E[0],O=E[1],k=V(),w=function(e,t){var a=Object(n.useState)(e),o=Object(f.a)(a,2),c=o[0],r=o[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e,t]),c}(b,300),y=Object(n.useCallback)((function(){return u.getBounds()}),[u]),S=function(){navigator.geolocation?(c(!0),navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude,o=new i.maps.LatLng(a,n);u.panTo(o),h(y()),c(!1)}),(function(){c(!1),alert("\uc704\uce58\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}))):(alert("\uc704\uce58\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),c(!1))},C=function(){document.querySelectorAll("[data-shop-code]").forEach((function(e){return e.parentNode.removeChild(e)}))};return Object(n.useEffect)((function(){var e=document.getElementById("map"),t={center:new i.maps.LatLng(37.4019528117587,127.10828323199647),level:5},a=new i.maps.Map(e,t);m(a),c(!1)}),[i.maps]),Object(n.useEffect)((function(){u&&(S(),i.maps.event.addListener(u,"tilesloaded",(function(){u.getLevel()<=6?(h(y()),O("")):(C(),R&&(R(),c(!1)),O("\uc9c0\ub3c4\ub97c \uc880 \ub354 \ud655\ub300\ud574\uc8fc\uc138\uc694"))})))}),[u]),Object(n.useEffect)((function(){if(b){var e=u.getCenter(),t=e.Ha,a=e.Ga,n=200*(u.getLevel()+1);c(!0),H.Shop.fetchShopsByBounds(t,a,n).then((function(e){var t=e.data.stores;console.log(e.data),function(e){setTimeout((function(){C(),e.forEach((function(e){var t=e.lat,a=e.lng;new i.maps.CustomOverlay({map:u,clickable:!0,position:new i.maps.LatLng(t,a),content:Object(g.renderToStaticMarkup)(o.a.createElement(D,e)),zIndex:99999}).setMap(u),Object(Q.a)("[data-tippy-content]",{allowHTML:!0})}))}),0)}(t),c(!1)})).catch((function(e){G.a.isCancel(e)||c(!1)}))}}),[w]),o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{onSearch:function(e){var t;e&&(t=e,c(!0),(new i.maps.services.Places).keywordSearch(t,(function(e,t){if(t===i.maps.services.Status.OK){var a=e[0],n=a.x,o=a.y,r=new i.maps.LatLng(o,n);u.panTo(r),u.setLevel(3)}else t===i.maps.services.Status.ZERO_RESULT?alert("\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."):alert("\uc11c\ube44\uc2a4\uc5d0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");c(!1)})))}}),o.a.createElement(_,{pending:a,onLocationButtonClick:S,onRenewButtonClick:function(){u.getLevel()<=6&&h(y())}}),a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(A.a,{color:"secondary",className:k.progress}),o.a.createElement("div",{className:k.dimmer})),j&&o.a.createElement(Z,{message:j}),o.a.createElement("div",{id:"map",className:k.map}))},Y=Object(b.a)((function(e){return{root:{position:"fixed",zIndex:9999,right:0,bottom:0,width:200,fontSize:11,padding:e.spacing(1),textAlign:"right"}}})),ee=function(){var e=Y();return o.a.createElement("div",{className:e.root},o.a.createElement("div",null,"\uac1c\ubc1c: \uc815\ud604\uc2b9"),o.a.createElement("div",null,"\ubb38\uc758: ahribori@gmail.com"))},te=a(161),ae=a(160),ne=a(159),oe=a(163),ce=function(){var e=Object(n.useState)(!0),t=Object(f.a)(e,2),a=t[0],c=t[1],r=function(){c(!1)};return o.a.createElement(oe.a,{open:a,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ne.a,{id:"alert-dialog-title"},"\uc54c\ub824\ub4dc\ub9bd\ub2c8\ub2e4"),o.a.createElement(ae.a,null,o.a.createElement(j.a,{variant:"body2",gutterBottom:!0,style:{fontSize:13}},"* \ubcf8 \uc0ac\uc774\ud2b8\uc5d0\uc11c\ub294 \ucf54\ub85c\ub09819 \uacf5\uc801\ub9c8\uc2a4\ud06c \uc2e4\uc2dc\uac04 \uc7ac\uace0 \uc870\ud68c API\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."),o.a.createElement(j.a,{variant:"body2",gutterBottom:!0,style:{fontSize:13}},"* \ub370\uc774\ud130 \uac31\uc2e0 \uc8fc\uae30\ub294 \uc57d 5\ubd84 \uc785\ub2c8\ub2e4."),o.a.createElement(j.a,{variant:"body2",gutterBottom:!0,style:{fontSize:13}},"* 2020\ub144 3\uc6d4 8\uc77c \uc624\ud6c4 6~7\uc2dc\uacbd\ubd80\ud130 \uc2e4\uc81c \ub370\uc774\ud130\uac00 \ubc18\uc601\ub429\ub2c8\ub2e4.")),o.a.createElement(te.a,null,o.a.createElement(L.a,{onClick:r,color:"primary"},"\ud655\uc778")))};var re=function(){return o.a.createElement(i.a,{theme:m},o.a.createElement("div",{className:d.a.App},o.a.createElement(X,null),o.a.createElement(ee,null),o.a.createElement(ce,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,a){e.exports={App:"App_App__3jZN5"}},86:function(e,t,a){e.exports=a(116)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.63047a69.chunk.js.map